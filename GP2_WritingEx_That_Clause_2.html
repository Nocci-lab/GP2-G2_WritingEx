<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>„É©„Ç§„ÉÜ„Ç£„É≥„Ç∞‰∏¶„ÅπÊõø„ÅàÁ∑¥Áøí2</title>

<style>
body{
  font-family:"Hiragino Maru Gothic ProN",sans-serif;
  background:#fff9e6;
  text-align:center;
  padding:20px;
}
.frame{
  border:3px solid #b6d957;
  background:#fff;
  padding:20px;
  max-width:980px;
  margin:auto;
  border-radius:12px;
}
.qnum{font-size:24px;font-weight:bold;}
.grammar{
  font-size:18px;
  color:#2b6cb0;
  margin:6px 0;
  font-weight:bold;
}
.jp{
  font-size:15px;
  color:#555;
  margin-bottom:12px;
}
.row{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(90px,1fr));
  gap:10px;
  margin:14px 0;
}
.slot{
  height:60px;
  border:2px dashed #bbb;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card{
  background:#e6f5e6;
  padding:8px 12px;
  border-radius:8px;
  box-shadow:2px 2px 6px rgba(0,0,0,.25);
  cursor:pointer;
  user-select:none;
  font-size:16px;
  font-weight:bold;
}
button{
  padding:8px 18px;
  font-size:16px;
  margin:6px;
}
#message{
  font-size:20px;
  height:28px;
  font-weight:bold;
}
#progress{
  margin-bottom:10px;
  font-size:16px;
  color:#444;
}
</style>
</head>

<body>

<h2>„É©„Ç§„ÉÜ„Ç£„É≥„Ç∞‰∏¶„ÅπÊõø„ÅàÁ∑¥Áøí2</h2>

<div class="frame">

  <div id="progress">
    ÂÖ® <b id="totalQ"></b> Âïè„ÅÇ„Çä„Åæ„Åô
  </div>

  <div class="qnum" id="qnum"></div>
  <div class="grammar" id="grammar"></div>
  <div class="jp" id="jp"></div>

  <div class="row" id="answerRow"></div>
  <div class="row" id="cardRow"></div>

  <button onclick="checkAnswer()">Check</button>
  <button onclick="shuffle()">Shuffle</button>
  <button id="nextBtn" onclick="nextQ()" style="display:none">NEXT ‚ñ∂</button>
  <button onclick="makePDF()">üìÑ PDF</button>

  <div id="message"></div>
</div>

<script>
const data = [
{
 grammar:"ÂΩ¢Âºè‰∏ªË™û it",
 en:["It","is","more","cost-effective","for","people","to","work","from","home","than","to","commute","."],
 jp:"‰∫∫„ÄÖ„Å´„Å®„Å£„Å¶„ÄÅÈÄöÂã§„Åô„Çã„Çà„Çä„ÇÇÂú®ÂÆÖ„ÅßÂÉç„Åè„Åª„ÅÜ„Åå„ÄÅ„Çà„ÇäË≤ªÁî®ÂØæÂäπÊûú„ÅåÈ´ò„ÅÑ„ÄÇ"
},
{
 grammar:"ÂΩ¢Âºè‰∏ªË™û it",
 en:["It","is","crucial","for","college","students","to","study","English","more","seriously","in","order","to","adapt","to","the","international","community","."],
 jp:"Â§ßÂ≠¶Áîü„Å´„Å®„Å£„Å¶„ÄÅÂõΩÈöõÁ§æ‰ºö„Å´ÈÅ©Âøú„Åô„Çã„Åü„ÇÅ„Å´Ëã±Ë™û„Çí„Çà„ÇäÁúüÂâ£„Å´Â≠¶„Å∂„Åì„Å®„ÅØÈùûÂ∏∏„Å´ÈáçË¶Å„Åß„ÅÇ„Çã„ÄÇ"
},
{
 grammar:"ÂΩ¢Âºè‰∏ªË™û it",
 en:["It","is","becoming","more","dangerous","for","people","of","any","age","to","travel","alone","to","another","country","."],
 jp:"„ÅÑ„Åã„Å™„ÇãÂπ¥ÈΩ¢„ÅÆ‰∫∫„ÇÇ‰∏Ä‰∫∫„ÅßÂ§ñÂõΩ„Å∏ÊóÖË°å„Åô„Çã„Åì„Å®„ÅØ„ÄÅ„Åæ„Åô„Åæ„ÅôÂç±Èô∫„Å´„Å™„Å£„Å¶„Åç„Å¶„ÅÑ„Çã„ÄÇ"
},
{
 grammar:"thatÁØÄ",
 en:["It","is","becoming","increasingly","serious","that","the","number","of","people","in","need","is","increasing","around","the","world","."],
 jp:"‰∏ñÁïå‰∏≠„ÅßÊîØÊè¥„ÇíÂøÖË¶Å„Å®„Åô„Çã‰∫∫„ÅÆÊï∞„ÅåÂ¢ó„Åà„Å¶„ÅÑ„Çã„Åì„Å®„ÅØ„ÄÅ„Åæ„Åô„Åæ„ÅôÊ∑±Âàª„Å™ÂïèÈ°å„Å´„Å™„Å£„Å¶„Åç„Å¶„ÅÑ„Çã„ÄÇ"
},
{
 grammar:"thatÁØÄ",
 en:["It","has","been","a","problem","that","increasing","carbon","dioxide","emissions","are","contributing","to","global","warming","."],
 jp:"‰∫åÈÖ∏ÂåñÁÇ≠Á¥†„ÅÆÊéíÂá∫Èáè„ÅÆÂ¢óÂä†„ÅåÂú∞ÁêÉÊ∏©ÊöñÂåñ„Å´ÂΩ±Èüø„Çí‰∏é„Åà„Å¶„ÅÑ„Çã„Åì„Å®„ÅØ„ÄÅ‰ª•Ââç„Åã„ÇâÂïèÈ°å„Å®„Å™„Å£„Å¶„ÅÑ„Çã„ÄÇ"
},
{
 grammar:"ÂêåÊ†º„ÅÆ that",
 en:["Studying","abroad","gives","people","of","any","age","the","idea","that","learning","about","other","cultures","helps","them","understand","their","own","culture","."],
 jp:"ÁïôÂ≠¶„ÅØ„ÄÅ„ÅÑ„Åã„Å™„ÇãÂπ¥ÈΩ¢„ÅÆ‰∫∫„ÄÖ„Å´„Äå‰ªñÂõΩ„ÅÆÊñáÂåñ„ÇíÂ≠¶„Å∂„Åì„Å®„ÅØËá™ÂõΩ„ÅÆÊñáÂåñ„ÇíÁêÜËß£„Åô„ÇãÂä©„Åë„Å´„Å™„Çã„Äç„Å®„ÅÑ„ÅÜËÄÉ„Åà„Çí‰∏é„Åà„Çã„ÄÇ"
},
{
 grammar:"ÂêåÊ†º„ÅÆ that",
 en:["Being","bullied","gives","students","the","idea","that","speaking","up","is","difficult",",","even","though","it","is","necessary","."],
 jp:"„ÅÑ„Åò„ÇÅ„ÇíÂèó„Åë„Çã„Åì„Å®„ÅØ„ÄÅÁîüÂæí„Åü„Å°„Å´„ÄåÂøÖË¶Å„Åß„ÅÇ„Å£„Å¶„ÇÇÂ£∞„Çí‰∏ä„Åí„Çã„Åì„Å®„ÅØÈõ£„Åó„ÅÑ„Äç„Å®„ÅÑ„ÅÜËÄÉ„Åà„ÇíÊä±„Åã„Åõ„Çã„ÄÇ"
},
{
 grammar:"ÂêåÊ†º„ÅÆ that",
 en:["Having","parents","who","will","help","no","matter","what","gives","a","person","confidence","that","he","or","she","will","be","protected","."],
 jp:"„Å™„Å´„Åå„ÅÇ„Çç„ÅÜ„Å®Âä©„Åë„Å¶„Åè„Çå„ÇãË¶™„Åå„ÅÑ„Çã„Å®„ÅÑ„ÅÜ„Åì„Å®„ÅØ„ÄÅ„Åù„ÅÆ‰∫∫„Å´„ÄåËá™ÂàÜ„ÅØÂÆà„Çâ„Çå„Çã„Äç„Å®„ÅÑ„ÅÜËá™‰ø°„Çí‰∏é„Åà„Çã„ÄÇ"
}
];

let cur = 0;
let wrong = [];
let dragged = null;

function loadQ(){
  message.textContent="";
  nextBtn.style.display="none";
  const q=data[cur];
  qnum.textContent="Q"+(cur+1);
  grammar.textContent=q.grammar;
  jp.textContent=q.jp;
  answerRow.innerHTML="";
  cardRow.innerHTML="";
  q.en.forEach((w,i)=>{
    answerRow.appendChild(makeSlot());
    cardRow.appendChild(makeSlot(w,i));
  });
  shuffle();
}

function makeSlot(word="",home=null){
  const s=document.createElement("div");
  s.className="slot";
  s.ondragover=e=>e.preventDefault();
  s.ondrop=()=>{ if(dragged && !s.firstChild) s.appendChild(dragged); };
  if(word){
    const c=document.createElement("div");
    c.className="card";
    c.textContent=word;
    c.dataset.home=home;
    c.draggable=true;
    c.onclick=()=>tapMove(c);
    c.ondragstart=()=>dragged=c;
    s.appendChild(c);
  }
  s.onclick=()=>{
    if(s.parentElement.id==="answerRow" && s.firstChild){
      cardRow.children[s.firstChild.dataset.home].appendChild(s.firstChild);
    }
  };
  return s;
}

function tapMove(card){
  const empty=[...answerRow.children].find(s=>!s.firstChild);
  if(empty) empty.appendChild(card);
}

function shuffle(){
  const cards=[...document.querySelectorAll(".card")];
  cardRow.querySelectorAll(".slot").forEach(s=>s.innerHTML="");
  cards.sort(()=>Math.random()-.5)
       .forEach((c,i)=>cardRow.children[i].appendChild(c));
}

function checkAnswer(){
  const ans=[...answerRow.children].map(s=>s.firstChild?.textContent||"");
  if(JSON.stringify(ans)===JSON.stringify(data[cur].en)){
    message.textContent="Correct! ‚úÖ";
    nextBtn.style.display="inline-block";
  }else{
    message.textContent="Try again ‚ùå";
    wrong.push(data[cur]);
  }
}

function nextQ(){
  cur++;
  if(cur < data.length){
    loadQ();
  }else if(wrong.length){
    data.splice(0,data.length,...wrong);
    wrong=[];
    cur=0;
    alert("Âæ©Áøí„É¢„Éº„Éâ„Å´ÂÖ•„Çä„Åæ„Åô");
    loadQ();
  }else{
    message.textContent="ÂÖ®ÈÉ®ÂÆåÊàêÔºÅ„Åä„Å§„Åã„Çå„Åï„Åæ„Åß„Åó„Åü üéâ";
  }
}

function shuffleArray(arr){
  const a=[...arr];
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function makePDF(){
  const w = window.open("");
  w.document.write(`
  <html><head><style>
  body{font-family:"Hiragino Maru Gothic ProN";padding:24px;}
  .q{margin-bottom:22px;page-break-inside:avoid;}
  .line{border-bottom:1px solid #000;height:22px;margin-bottom:4px;}
  .page-break{page-break-before:always;}
  </style></head><body>
  <h2>„É©„Ç§„ÉÜ„Ç£„É≥„Ç∞‰∏¶„ÅπÊõø„ÅàÁ∑¥Áøí2</h2>
  Name: ________  Date: ________
  `);

  data.forEach((q,i)=>{
    w.document.write(`
    <div class="q">
      <b>Q${i+1}„Äê${q.grammar}„Äë</b><br>
      Ôºà${q.jp}Ôºâ<br>
      ${shuffleArray(q.en).join(" / ")}
      <div class="line"></div>
      <div class="line"></div>
    </div>
    `);
  });

  w.document.write(`<div class="page-break"></div><h2>Answer</h2>`);
  data.forEach((q,i)=>{
    w.document.write(`<div><b>Q${i+1}</b> ${q.en.join(" ")}</div>`);
  });

  w.document.write(`</body></html>`);
  w.document.close();
  w.print();
}

loadQ();
totalQ.textContent=data.length;
</script>

</body>
</html>
